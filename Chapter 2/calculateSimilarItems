# -*- coding: utf-8 -*-
# 定义编码格式
from recommendations import critics # 数据层
from ReadRecommendations import sim_distance,transFormPrefs
from topMatches import topMatches

def calculateSimilarItems(prefs, n=10):

    # 建立字典，以给出与这些物品最为相近的所有其他物品
    result = {}

    itemPrefs = transFormPrefs(prefs)
    c = 0
    for item in itemPrefs:
        c += 1
        if c % 100 == 0: print "%d / %d" % (c, len(itemPrefs))
        scores = topMatches(itemPrefs, item, n=n, similarity=sim_distance)
        result[item] = scores
    return result


print(calculateSimilarItems(critics))